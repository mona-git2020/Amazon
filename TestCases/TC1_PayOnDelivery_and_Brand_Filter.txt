*** Settings ***
Library		Selenium2Library	
Library		String
Library		Collections	
Resource	../Common/Common_Variables.txt
Resource	../Resources/Keywords.txt	
Suite Setup		Open Amazon
#Suite Teardown	Close Browser

*** Test Cases ***
Select Pay on Delivery Filter and Check According to Selected Filter
	Wait Until Element is visible		${MobilesButton}
	Click Element		${MobilesButton}
	Wait Until Element is visible		${PayOnDeliveryCheckbox}
	${valueCheckbox}=		Get Text	${PayOnDeliveryCheckbox}
	Click Element		${PayOnDeliveryCheckbox}
	Element Should Contain		${ToolbarSection}		${valueCheckbox}
	Wait Until Element is visible		${FilteredResults}
	: FOR	${pageNumber}		IN RANGE		1000	
	\	Check Filtered Result Availability
	\	Wait Until Element is visible		${NextButton}		timeout=10s	
	\	${status}=		Run Keyword And Return Status		Element Should Be Visible		${NextButtonDisabled}
	\	Run Keyword If		${status}==False		Click Element		${NextButton}
	\	...			ELSE		Exit For Loop
	\	Wait Until Element is visible		${FilteredResults}
	\	${pageNumber}=		Evaluate		${pageNumber}+1
	Go Back	
	Wait Until Element is visible		${FilteredResults}
	Wait Until Element is visible		${PayOnDeliverySelectedCheckbox}
	Click Element		${PayOnDeliverySelectedCheckbox}
	Wait Until Element is Not visible		${ToolbarSection}
	
Select Brands Filter and Check According to Selected Filter
	${statusCheckbox}=		Run Keyword And Return Status		Element Should Be Visible		${PayOnDeliverySelectedCheckbox}
	Run Keyword If		${statusCheckbox}==True			Click Element		${PayOnDeliverySelectedCheckbox}	
	Wait Until Element is visible		${MobilesButton}
	Wait Until Element is visible		${FilteredResults}		timeout=10s	
	${totalFilters}=	Get Element Count		${BrandSection}
	: For	${filter}		IN RANGE	1	${totalFilters}
	\	${filternum}=	Convert To String		${filter}	
	\	${num} =	Evaluate		${filternum}-1
	\	${keys}=	Get Dictionary Keys		${brandsList}		
	\	log		${keys[${num}]}
	\	log		${BrandSectionCheckbox}	
	\	${BrandSectionCheckbox}=	Replace String		${BrandSectionCheckbox}		VALUE		${keys[${num}]}
	\	log		${BrandSectionCheckbox}	
	\	Wait Until Element is visible		${BrandSectionCheckbox}		timeout=15s	
	\	Click Element		${BrandSectionCheckbox}
	\	${statusToolbar}=		Run Keyword And Return Status		Wait Until Element is visible		${ToolbarSection}		timeout=15s
	\	Run Keyword If		${statusToolbar}==False		Click Element		${BrandSectionCheckbox}
	\	Element Should Contain		${ToolbarSection}		${keys[${num}]}
	\	Wait Until Element is visible		${FilteredResults}
	\	${firstValue}=		Get From Dictionary		${brandsList}		${keys[${num}]}
	\	Check Filters For All Pages		${firstValue}		${keys[${num}]}
	\	${BrandSectionCheckbox}=	Replace String		${BrandSectionCheckbox}		${keys[${num}]}		VALUE	
	\	${BrandSectionSelectedCheckbox}=	Replace String		${BrandSectionSelectedCheckbox}		VALUE		${keys[${num}]}
	\	${statusFilters}=		Run Keyword And Return Status		Wait Until Element is visible		${BrandSectionSelectedCheckbox}	
	\	Go Back	
	\	Wait Until Element is visible		${BrandSectionSelectedCheckbox}
	\	Click Element		${BrandSectionSelectedCheckbox}	
	\	${BrandSectionSelectedCheckbox}=	Replace String		${BrandSectionSelectedCheckbox}		${keys[${num}]}		VALUE		
	
*** Keywords ***
Check Filtered Result Availability
	${status}=		Element Should Be Visible		${FilteredResults}
	

	
	
