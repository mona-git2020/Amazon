
*** Keywords ***
Open Amazon
	Open Browser	${urlOFAmazon}		${browser}		remote_url=http://192.168.43.6:4444/wd/hub		desired_capabilities={"browserName":"firefox","platform":"WINDOWS"}
	Maximize Browser Window

Check Filters For All Pages 
	[Arguments]		${firstValue}		${secondValue1}		${secondValue2}			${secondValue3}
	: FOR	${pageNumber}		IN RANGE		100	
	\	Check Filters In Single Page		${firstValue}		${secondValue1}		${secondValue2}			${secondValue3}			
	\	Wait Until Element is visible		${NextButton}		timeout=10s
	\	${status}=		Run Keyword And Return Status		Element Should Be Visible		${NextButtonDisabled}
	\	Run Keyword If		${status}==False		Click Element		${NextButton}
	\	...			ELSE		Exit For Loop
	\	Wait Until Element is visible		${FilteredResults}		timeout=10s
	\	${pageNumber}=		Evaluate		${pageNumber}+1


Check Filters In Single Page
	[Arguments]		${firstValue}		${secondValue1}		${secondValue2}		${secondValue3}	
	${totalResults}=		Get Element Count		${FilteredResults}
	: FOR	${singleResult}		IN RANGE		1	${totalResults}+1
	\	${singleResultNum}=		Convert To String		${singleResult}	
	\	${SingleFilteredResultNew}=			Replace String		${SingleFilteredResult}		NUM		${singleResultNum}
	\	Element Should Be Visible		 ${SingleFilteredResultNew}		timeout=10s
	\	${SingleFilteredResult}=	Replace String		${SingleFilteredResult}		${singleResultNum}		NUM
	\	${status}=		Run Keyword And Return Status		Element Should Contain 		${SingleFilteredResultNew}		Related searches
	\	Continue For Loop If		${status}==True
	\	${status1}=		Run Keyword And Return Status		Element Should Contain 		${SingleFilteredResultNew}		Sponsored
	\	Continue For Loop If		${status1}==True
	\	${status2}=		Run Keyword And Return Status		Element Should Contain 		${SingleFilteredResultNew}		Launching soon
	\	Continue For Loop If		${status2}==True
	\	${status3}=		Run Keyword And Return Status		Element Should Contain 		${SingleFilteredResultNew}		Prime Video
	\	Continue For Loop If		${status3}==True
	\	${status4}=		Run Keyword And Return Status		Element Should Contain 		${SingleFilteredResultNew}		Shop by 
	\	Continue For Loop If		${status4}==True
#	\	Log		${secondValue2}
	\	${value4}=		Convert To Uppercase		${secondValue2}
	\	${charList}=		Split String To Characters		${secondValue2}
	\	${firstChar}=		Convert To Uppercase		${charList[0]}
#	\	${secondValue4}=		Get Substring		${secondValue3}		1
	\	${value5}=		Replace String		${secondValue2}		${charList[0]}		${firstChar}		count=1
	\	${statusResult}=	Run Keyword And Return Status		Element Should Contain		${SingleFilteredResultNew}		${firstValue}	
	\	${statusResult1}=	Run Keyword And Return Status		Element Should Contain		${SingleFilteredResultNew}		${secondValue1}	
	\	${statusResult2}=	Run Keyword And Return Status		Element Should Contain		${SingleFilteredResultNew}		${secondValue2}	
	\	${statusResult3}=	Run Keyword And Return Status		Element Should Contain		${SingleFilteredResultNew}		${secondValue3}			
	\	${statusResult4}=	Run Keyword And Return Status		Element Should Contain		${SingleFilteredResultNew}		${value4}			
	\	Run Keyword If		${statusResult}==False and ${statusResult1}==False and ${statusResult2}==False and ${statusResult3}==False and ${statusResult4}==False		Element Should Contain		${SingleFilteredResultNew}		${value5}			
	\	${SingleFilteredResult}=	Replace String		${SingleFilteredResult}		${singleResultNum}		NUM
	\	${singleResult}=	Evaluate	${singleResult}+1

Verify Sort By Price For All Pages
	: FOR	${pageNumber}		IN RANGE		100	
	\	Verufy Sort By Price For All Rows			
	\	Wait Until Element is visible		${NextButton}		timeout=10s
	\	${status}=		Run Keyword And Return Status		Element Should Be Visible		${NextButtonDisabled}
	\	Run Keyword If		${status}==False		Click Element		${NextButton}
	\	...			ELSE		Exit For Loop
	\	Wait Until Element is visible		${FilteredResults}		timeout=10s
	\	${pageNumber}=		Evaluate		${pageNumber}+1


Verufy Sort By Price For All Rows	
	${totalResults}=		Get Element Count		${FilteredResults}
	: FOR	${row}		IN RANGE		1	${totalResults}+1
	\	${rowNum}=		Convert To String		${row}	
	\	${CurrentDisplayedPrice}=	Replace String		${DisplayedPrice}		NUM		${rowNum}
	\	${statusPrice}=		Run Keyword And Return Status		Element Should Be Visible		 ${CurrentDisplayedPrice}
	\	Continue For Loop If		${statusPrice}==False
	\	${currentPrice}=		Get Text		${CurrentDisplayedPrice}
	\	${currentPrice}=		Remove String		${currentPrice}			,
	\	${DisplayedPrice}=	Replace String		${DisplayedPrice}		${rowNum}		NUM
	\	${previousRow}=		Evaluate	${row}-1
	\	${previousRowNum}=		Convert To String		${previousRow}		
	\	Continue For Loop If		${previousRow}==-1
	\	${PreviousDisplayedPrice}=	Replace String		${DisplayedPrice}		NUM		${previousRowNum}	
	\	${statusPrice1}=		Run Keyword And Return Status		Element Should Be Visible		 ${PreviousDisplayedPrice}
	\	Continue For Loop If		${statusPrice1}==False
	\	${previousPrice}=		Get Text		${PreviousDisplayedPrice}
	\	${previousPrice}=		Remove String		${previousPrice}		,
	\	${status}=		Run Keyword And Return Status		Element Should Contain 		${SortByButton}		Low to High
	\	Run Keyword If		${status}==True			Should Be True			${PreviousPrice}<=${currentPrice}
	\	Run Keyword If		${status}==False		Should Be True			${PreviousPrice}>=${currentPrice}	
	\	${DisplayedPrice}=	Replace String		${DisplayedPrice}		${rowNum}		NUM
	\	Wait Until Element is visible		${FilteredResults}		timeout=10s
	\	${row}=		Evaluate	${row}+1

Verify Department Filtered Results For All Pages
	[Arguments]		${filterLabel}
	: FOR	${pageNumber}		IN RANGE		100	
	\	Verify Department Filtered Results From Single Page		${filterLabel}	
	\	Wait Until Element is visible		${NextButton}		timeout=10s
	\	${status}=		Run Keyword And Return Status		Element Should Be Visible		${NextButtonDisabled}
	\	Run Keyword If		${status}==False		Click Element		${NextButton}
	\	...			ELSE		Exit For Loop
	\	Wait Until Element is visible		${FilteredResults}		timeout=10s
	\	${pageNumber}=		Evaluate		${pageNumber}+1


Verify Department Filtered Results From Single Page
	[Arguments]		${filterLabel}
	${filterLabel}=		Remove String		${filterLabel}		(		)	
	${filterLabel}=		Split String		${filterLabel}		${SPACE}
	${totalResults}=		Get Element Count		${DepartmentFilteredResults}
	: FOR	${result}		IN RANGE		1	${totalResults}+1
	\	${resultNum}=		Convert To String		${result}
	\	${SingleDepartmentFilteredResults}=		Replace String		${SingleDepartmentFilteredResults}		NUM		${resultNum}
	\	${ProductTitleLink}=		Replace String		${ProductTitleLink}		NUM		${resultNum}
	\	${status}=		Run Keyword And Return Status		Element Should Contain			${SingleDepartmentFilteredResults}			${filterLabel[0]}
	\	${status1}=		Run Keyword And Return Status		Element Should Contain			${SingleDepartmentFilteredResults}			${filterLabel[1]}
	\	${status2}		${status3}		Run Keyword If		${status}==False and ${status1}==False			Verify Department Filtered Results After Clicking On Element		${ProductTitleLink}		${filterLabel}
	\	Wait Until Element Is Visible			${DepartmentFilteredResults}		timeout=10s	
	\	Run Keyword If		${status2}==False and ${status3}==False			Element Should Be Visible		${SingleDepartmentFilteredResults}	
	\	${SingleDepartmentFilteredResults}=		Replace String		${SingleDepartmentFilteredResults}		${resultNum}		NUM
	\	${ProductTitleLink}=		Replace String		${ProductTitleLink}		${resultNum}		NUM
	
Verify Department Filtered Results After Clicking On Element		
	[Arguments]		${ProductTitleLink}		${filterLabel}	
	Click Element		${ProductTitleLink}	
	Wait Until Element Is Visible			${NewPageProductDetails}		timeout=20s
	${status2}=		Run Keyword And Return Status			Element Should Contain			${NewPageProductDetails}		${filterLabel[0]}
	${status3}=		Run Keyword And Return Status			Element Should Contain			${NewPageProductDetails}		${filterLabel[1]}
	Go Back
	Return From Keyword			${status2}		${status3}